# Mypy configuration for pip type checking
#
# This configuration is used by `nox -s typecheck` and represents the target
# mypy configuration once the pip codebase has proper type annotations.
# Eventually, this configuration should be moved to the main pyproject.toml
# to replace the current [tool.mypy] section.

[tool.mypy]
mypy_path = [
  "tests/typing/untracked-vendored-stubs",  # these are generated by nox typecheck
  "src",
]
strict = true
no_implicit_reexport = false
disallow_subclassing_any = false
disallow_untyped_calls = false
warn_return_any = true
ignore_missing_imports = false
warn_redundant_casts = true

exclude = [
    "src/pip/_vendor",
    # Tell mypy that it isn't type-checking this directory (it is just using it
    # for vendored library stubs)
    "tests/typing/untracked-vendored-stubs",
    "tests/data",
]

[[tool.mypy.overrides]]
module = "scripttest"  # v2.0.post1 doesn't yet ship with py.typed
ignore_missing_imports = true

[[tool.mypy.overrides]]
module = "pip._internal.utils._jaraco_text"
ignore_errors = true

[[tool.mypy.overrides]]
module = "virtualenv"
ignore_missing_imports = true

[[tool.mypy.overrides]]
module = "pip._vendor.*"
# Errors with the vendored libraries can be ignored (an upstream problem).
ignore_errors = true
